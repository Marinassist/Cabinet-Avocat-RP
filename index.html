<!DOCTYPE html>
// --- CONFIGURATION FIREBASE ---
// Remplace les valeurs ci-dessous par celles que Firebase t'a donn√©es √† l'√©tape 1
const firebaseConfig = {
  apiKey: "AIzaSyAHWxt6e93DcDbnILgdfT9dStlM-aOitu4",
  authDomain: "cabinet-avocat-rp.firebaseapp.com",
  projectId: "cabinet-avocat-rp",
  storageBucket: "cabinet-avocat-rp.firebasestorage.app",
  messagingSenderId: "832001116280",
  appId: "1:832001116280:web:9c9acb08b30d2f7453058d"
};

// Importation des modules Firebase
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// --- FONCTION POUR SAUVEGARDER UN CLIENT ---
async function saveClientToDatabase(nom, role) {
    try {
        await addDoc(collection(db, "clients"), {
            nom: nom,
            role: role,
            dateCreation: new Date()
        });
        alert("Client sauvegard√© dans la base de donn√©es !");
    } catch (e) {
        console.error("Erreur d'ajout : ", e);
    }
}

// --- FONCTION POUR CHARGER LES CLIENTS ---
async function loadClients() {
    const querySnapshot = await getDocs(collection(db, "clients"));
    const list = document.getElementById('client-list');
    list.innerHTML = "";
    querySnapshot.forEach((doc) => {
        const client = doc.data();
        list.innerHTML += `<p><strong>${client.nom}</strong> (${client.role})</p>`;
    });
}
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>LawOS | Cabinet d'Avocat San Andreas</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --rose-pale: #FFF5F5; --rose-accent: #E19898; --gold: #D4AF37; --dark: #2C2C2C; --glass: rgba(255, 255, 255, 0.9); }
        body { margin: 0; font-family: 'Montserrat', sans-serif; background: url('https://images.unsplash.com/photo-1505664194779-8beaceb93744?q=80&w=2070') center/cover; height: 100vh; overflow: hidden; }
        
        /* LOGIN */
        #login-screen { position: fixed; inset: 0; background: var(--rose-pale); display: flex; align-items: center; justify-content: center; z-index: 1000; }
        .login-card { background: white; padding: 40px; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); border: 1px solid var(--gold); text-align: center; width: 350px; }
        
        /* DESKTOP */
        #desktop { display: none; height: 100vh; position: relative; }
        .dock { position: fixed; left: 20px; top: 50%; transform: translateY(-50%); display: flex; flex-direction: column; gap: 15px; background: var(--glass); padding: 20px; border-radius: 50px; border: 1px solid var(--rose-accent); backdrop-filter: blur(10px); }
        .icon { width: 55px; height: 55px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: 0.3s; font-size: 24px; border: 2px solid transparent; }
        .icon:hover { transform: scale(1.1); border-color: var(--gold); }

        /* WINDOWS */
        .window { position: absolute; top: 50px; left: 150px; width: 850px; height: 600px; background: white; border-radius: 12px; box-shadow: 0 15px 40px rgba(0,0,0,0.2); display: none; flex-direction: column; border: 1px solid var(--rose-accent); z-index: 10; overflow: hidden; }
        .win-header { background: linear-gradient(90deg, var(--rose-accent), #f3caca); padding: 10px 20px; color: white; display: flex; justify-content: space-between; font-family: 'Playfair Display', serif; }
        .win-body { padding: 25px; overflow-y: auto; height: 100%; }
        
        .card { background: var(--rose-pale); padding: 15px; border-radius: 10px; margin-bottom: 15px; border: 1px solid #eee; }
        button { background: var(--gold); color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer; font-weight: 600; }
        input, select { width: 100%; padding: 10px; margin: 8px 0; border: 1px solid #ddd; border-radius: 5px; }
        
        /* RESTRICTION CLASSES */
        .admin-only { display: none; } /* Cach√© par d√©faut */
    </style>
</head>
<body>

<div id="login-screen">
    <div class="login-card">
        <h1 style="font-family:'Playfair Display'; color:var(--gold)">LawOS</h1>
        <input type="text" id="username" placeholder="Identifiant (Ex: Avocat)">
        <input type="password" id="password" placeholder="Mot de passe">
        <button onclick="login()" style="width:100%">CONNEXION</button>
    </div>
</div>

<div id="desktop">
    <div class="dock">
        <div class="icon admin-only" title="Dossiers" onclick="openWin('win-dossiers')">üìÇ</div>
        <div class="icon admin-only" title="Calculateur" onclick="openWin('win-calc')">‚öñÔ∏è</div>
        <div class="icon admin-only" title="Comptabilit√©" onclick="openWin('win-compta')">üí∞</div>
        <div class="icon admin-only" title="Casier Priv√©" onclick="openWin('win-casier')">üïµÔ∏è</div>
        <div class="icon" title="Espace Client" onclick="openWin('win-client')">üë§</div>
        <div class="icon" title="D√©connexion" onclick="location.reload()" style="background:#ffdbdb">‚ùå</div>
    </div>

    <div id="win-client" class="window">
        <div class="win-header"><span>üë§ Mon Espace Personnel</span><span onclick="closeWin('win-client')" style="cursor:pointer">√ó</span></div>
        <div class="win-body">
            <h2 id="client-welcome">Bienvenue</h2>
            <div class="card">
                <h3>üìÑ Mes Contrats & Documents</h3>
                <p id="client-docs">Aucun document d√©pos√© pour le moment.</p>
            </div>
            <div class="card">
                <h3>üí∞ Mes Factures</h3>
                <p id="client-bills">Aucune facture impay√©e.</p>
            </div>
        </div>
    </div>

    <div id="win-calc" class="window admin-only">
        <div class="win-header"><span>‚öñÔ∏è Calculateur de Peines</span><span onclick="closeWin('win-calc')" style="cursor:pointer">√ó</span></div>
        <div class="win-body">
            <input type="text" id="crime" placeholder="Infraction">
            <input type="number" id="fine" placeholder="Amende $">
            <button onclick="addCrime()">Calculer</button>
            <div id="total-calc" class="card" style="margin-top:20px">Total : 0 $</div>
        </div>
    </div>
    
    </div>

<script type="module">
    // --- REMPLACE ICI AVEC TES CLES FIREBASE ---
    const firebaseConfig = {
      apiKey: "TON_API_KEY",
      authDomain: "TON_DOMAINE.firebaseapp.com",
      projectId: "TON_PROJET",
      storageBucket: "TON_PROJET.appspot.com",
      messagingSenderId: "...",
      appId: "..."
    };

    // Fonctions de navigation
    window.openWin = function(id) { document.getElementById(id).style.display = 'flex'; }
    window.closeWin = function(id) { document.getElementById(id).style.display = 'none'; }

    window.login = function() {
        const user = document.getElementById('username').value;
        if(user === "") return alert("Entrez un nom");

        document.getElementById('login-screen').style.display = 'none';
        document.getElementById('desktop').style.display = 'block';

        if(user.toLowerCase() === "avocat") {
            // Afficher tout pour l'avocat
            document.querySelectorAll('.admin-only').forEach(el => el.style.display = 'flex');
            document.getElementById('client-welcome').innerText = "Mode Administration - B√¢tonnier";
        } else {
            // Mode Client
            document.getElementById('client-welcome').innerText = "Espace Client de " + user;
            openWin('win-client');
        }
    }
</script>
</body>
</html>
